#!/bin/sh

uname -r > hostkernelversion.conf
hostkernel=`cat ./hostkernelversion.conf`
guestkernel=`cat ./imagekernelversion.conf`

# Right now we have three build types:
#
# Release - Produce images close to an actual release
# Debug - Enable advanced debugging features
# Workflow - Suitable for workflow builds

# Override: BUILD_TYPE=Release ./configure
BUILD_TYPE="${BUILD_TYPE:-Debug}"

cmake -DCMAKE_BUILD_TYPE=$BUILD_TYPE -DBUILDTOOLS_DIR=../buildtools -DHOST_KERNEL=$hostkernel -DGUEST_KERNEL=$guestkernel .. -GNinja

echo "Configured correctly!"
